<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>DAPI â€” REST API Documentation</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .folder { margin-top: 15px; font-weight: bold; }
    .file { margin-left: 20px; padding: 4px; }
    code { background: #eee; padding: 3px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>DAPI â€” REST API</h1>

  <p>Semua fitur di bawah ini otomatis dibaca dari folder <code>/api</code>.</p>

  <div id="list">Loading fitur...</div>

  <script>
    async function loadList() {
      const res = await fetch('/api/list');
      const data = await res.json();

      if (!data.success) {
        document.getElementById("list").innerHTML = "Gagal memuat data.";
        return;
      }

      function render(items) {
        let html = "";

        items.forEach(item => {
          if (item.type === "folder") {
            html += `<div class="folder">ğŸ“ ${item.name}</div>`;
            html += render(item.children);
          } else if (item.type === "file") {
            html += `
              <div class="file">
                ğŸ”— <code>${item.endpoint}</code>
              </div>`;
          }
        });

        return html;
      }

      document.getElementById("list").innerHTML = render(data.tree);
    }

    loadList();
  </script>
</body>
</html>
